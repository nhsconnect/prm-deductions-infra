{
  "widgets": [
    {
      "height": 6,
      "width": 6,
      "y": 0,
      "x": 6,
      "type": "metric",
      "properties": {
        "metrics": [
          [ "AWS/SQS", "ApproximateAgeOfOldestMessage", "QueueName", "${mesh_forwarder_nems_observability_queue}" ],
          [ ".", "NumberOfMessagesSent", ".", "." ],
          [ ".", "NumberOfMessagesReceived", ".", "." ],
          [ ".", "ApproximateNumberOfMessagesDelayed", ".", "." ],
          [ ".", "ApproximateNumberOfMessagesVisible", ".", "." ],
          [ ".", "SentMessageSize", ".", "." ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "${region}",
        "stat": "Average",
        "period": 300,
        "title": "Incoming NEMS Observability Queue"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 6,
      "x": 0,
      "type": "metric",
      "properties": {
        "metrics": [
          [ "MeshForwarder", "MeshInboxMessageCount", { "id": "m1" } ],
          [ { "expression": "ANOMALY_DETECTION_BAND(m1, 2)", "label": "MeshForwarder MeshInboxMessageCount (expected)", "color": "#95A5A6" } ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "${region}",
        "stat": "Average",
        "period": 300,
        "title": "MESH Inbox Message Count"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 0,
      "x": 0,
      "type": "metric",
      "properties": {
        "metrics": [
          [ "NemsEventProcessor", "Health", "Environment", "${environment}" ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "${region}",
        "stat": "Average",
        "period": 300,
        "title": "NEMS Events Processor Health"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 0,
      "x": 18,
      "type": "metric",
      "properties": {
        "metrics": [
          [ "NemsEventProcessor", "ErrorCountInLogs" ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "${region}",
        "stat": "Average",
        "period": 300,
        "title": "NEMS Events Processor Error Count"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 6,
      "x": 6,
      "type": "metric",
      "properties": {
        "metrics": [
          [ "MeshForwarder", "ErrorCountInLogs" ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "${region}",
        "stat": "Average",
        "period": 300,
        "start": "-PT3H",
        "end": "P0D",
        "title": "MESH Forwarder Error Count"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 6,
      "x": 12,
      "type": "metric",
      "properties": {
        "metrics": [
          [ "PdsAdaptor", "ErrorCountInLogs" ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "${region}",
        "stat": "Average",
        "period": 300,
        "start": "-PT3H",
        "end": "P0D",
        "title": "PDS Adaptor Error Count"
      }
    },
    ${mesh_cpu_widget},
    ${mesh_memory_widget},
    ${nems_cpu_widget},
    ${nems_memory_widget}
  ]
}